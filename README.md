# Docker åŒ–å‰åç«¯åˆ†ç¦» TodoList é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªä¼ä¸šçº§ Demo é¡¹ç›®ï¼Œæ¼”ç¤ºå®Œæ•´çš„ CI/CD æµç¨‹ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹æ€§

- âœ… å‰åç«¯åˆ†ç¦»æ¶æ„
- âœ… Docker å®¹å™¨åŒ–éƒ¨ç½²
- âœ… GitHub Actions CI/CD
- âœ… ç”¨æˆ·è®¤è¯ (JWT)
- âœ… Todo CRUD åŠŸèƒ½

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- Node.js 20+
- Express
- PostgreSQL
- JWT é‰´æƒ

### å‰ç«¯
- Vue 3 + Vite
- Vue Router
- Axios

### DevOps
- Docker
- docker-compose
- GitHub Actions
- GHCR (GitHub Container Registry)

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Docker
- Docker Compose

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/YOUR_USERNAME/todolist-ci-demo.git
cd todolist-ci-demo
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹é…ç½®
```

### 3. ä¸€é”®å¯åŠ¨
```bash
docker compose up -d
```

### 4. è®¿é—®åº”ç”¨
- å‰ç«¯: http://localhost
- åç«¯ API: http://localhost:3000

## ğŸ” é»˜è®¤é…ç½®

æ•°æ®åº“é…ç½®:
- User: `todo`
- Password: `todo`
- Database: `todo_db`
- JWT Secret: `supersecret`

> âš ï¸ ç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…ä¿®æ”¹è¿™äº›é»˜è®¤å€¼ï¼

## ğŸ“ API æ–‡æ¡£

### è®¤è¯æ¥å£

#### æ³¨å†Œ
```bash
POST /api/register
Content-Type: application/json

{
  "username": "test",
  "password": "123456"
}
```

#### ç™»å½•
```bash
POST /api/login
Content-Type: application/json

{
  "username": "test",
  "password": "123456"
}

# å“åº”
{
  "token": "JWT_TOKEN"
}
```

### Todo æ¥å£ (éœ€è¦ JWT)

#### è·å–åˆ—è¡¨
```bash
GET /api/todos
Authorization: Bearer <token>
```

#### åˆ›å»º Todo
```bash
POST /api/todos
Authorization: Bearer <token>
Content-Type: application/json

{
  "content": "å­¦ä¹  Docker"
}
```

#### åˆ é™¤ Todo
```bash
DELETE /api/todos/:id
Authorization: Bearer <token>
```

## ğŸš€ CI/CD æµç¨‹

### è‡ªåŠ¨æ„å»º
- Push åˆ° `main` æˆ– `dev` åˆ†æ”¯è§¦å‘
- è‡ªåŠ¨æ„å»ºå‰åç«¯ Docker é•œåƒ
- æ¨é€åˆ° GitHub Container Registry

### è‡ªåŠ¨éƒ¨ç½²
- Push åˆ° `dev` åˆ†æ”¯è§¦å‘
- SSH éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨
- è‡ªåŠ¨æ‹‰å–æœ€æ–°é•œåƒå¹¶é‡å¯æœåŠ¡

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
todolist-ci-demo/
â”œâ”€â”€ frontend/              # å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â””â”€â”€ main.js
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/               # åç«¯
â”‚   â”œâ”€â”€ app.js            # ä¸»å…¥å£
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml        # CI/CD é…ç½®
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸ”§ å¼€å‘å‘½ä»¤

### æœ¬åœ°å¼€å‘

#### åç«¯
```bash
cd backend
npm install
npm run dev
```

#### å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```

### Docker æ“ä½œ

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker compose down

# é‡æ–°æ„å»º
docker compose build --no-cache

# æ¸…ç†æ‰€æœ‰å®¹å™¨å’Œå·
docker compose down -v
```

## ğŸ”’ å®‰å…¨å»ºè®®

ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶ï¼š

1. **ä¿®æ”¹é»˜è®¤å¯†ç **
   - ä¿®æ”¹ `.env` ä¸­çš„æ‰€æœ‰å¯†ç 
   - ä½¿ç”¨å¼ºå¯†ç 

2. **JWT Secret**
   - ä½¿ç”¨å¤æ‚çš„éšæœºå­—ç¬¦ä¸²
   - å®šæœŸæ›´æ¢

3. **HTTPS**
   - é…ç½® SSL è¯ä¹¦
   - ä½¿ç”¨ Let's Encrypt

4. **æ•°æ®åº“å®‰å…¨**
   - é™åˆ¶æ•°æ®åº“è®¿é—®
   - å®šæœŸå¤‡ä»½

## ğŸ“„ License

MIT License

## ğŸ‘¤ Author

Generated by AI Assistant
